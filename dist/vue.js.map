{"version":3,"file":"vue.js","sources":["../src/observer/index.js","../src/state.js","../src/init.js","../src/index.js"],"sourcesContent":["class Observer {\r\n    constructor(value) { // 需要对这个value属性重新定义\r\n        this.walk(value);\r\n    }\r\n    walk(data) {\r\n        // 将对象中的所有key 重新用defineProperty 定义成响应式的\r\n        Object.keys(data).forEach(key=>{\r\n            defineReactive(data, key, data[key]);\r\n        })\r\n    }\r\n}\r\n\r\nfunction defineReactive(data,key,value){\r\n    Object.defineProperty(data,key,{\r\n        get(){\r\n            return value;\r\n        },\r\n        set(newValue) {\r\n            if(newValue === value) return;\r\n            value = newValue\r\n        }\r\n    })\r\n}\r\n\r\nexport function observe(data) {\r\n    // 只对对象类型进行观测 非对象类型无法观测\r\n\r\n    if(typeof data !== 'object' || data == null){\r\n        return ;\r\n    }\r\n    // 通过类来实现对数据的观测 类可以方便扩展，会产生实例\r\n    return new Observer(data);\r\n} ","import { observe } from \"./observer/index\";\r\n\r\nexport function initState(vm) {\r\n    // 将所有数据都定义在 vm 属性上，并且后续更改 需要触发视图更新\r\n    const opts = vm.$options; // 获取用户属性\r\n    if(opts.props){\r\n        \r\n    }\r\n    if(opts.methods) {\r\n\r\n    }\r\n    if(opts.data) { // 数据的初始化\r\n        initData(vm);\r\n    }\r\n    if(opts.computed){\r\n\r\n    }\r\n    if(opts.watch) {\r\n\r\n    }\r\n    \r\n}\r\n\r\nfunction proxy(vm,source,key) {\r\n    Object.defineProperty(vm,key,{\r\n        get(){\r\n            return vm[source][key]\r\n        },\r\n        set(newValue) {\r\n            vm[source][key] = newValue;\r\n        }\r\n    })\r\n}\r\n\r\nfunction initData(vm) {\r\n    // 数据劫持\r\n    let data = vm.$options.data;\r\n\r\n    // 对data类型进行判断 如果是函数 获取函数返回值作为对象\r\n    data = vm._data =  typeof data === 'function'?data.call(vm):data;\r\n\r\n    // 通过vm._data 获取劫持后的数据，用户就可以拿到_data了\r\n    // 将_data中的数据全部放到vm上\r\n    for(let key in data) {\r\n        proxy(vm,'_data',key); // vm.name => vm._data.name\r\n    }\r\n\r\n    // 观测这个数据\r\n    observe(data);\r\n}","import { initState } from \"./state\";\r\n\r\nexport function initMixin(Vue){\r\n    Vue.prototype._init = function (options) {\r\n        const vm = this;\r\n        vm.$options = options; // 实例上有个属性$options 表示的是用户传入的所有属性\r\n        // 初始化状态\r\n        initState(vm);\r\n    }\r\n}\r\n","// Vue2.0中就是一个构造函数 class\r\n\r\nimport { initMixin } from \"./init\";\r\n\r\nfunction Vue(options) {\r\n    this._init(options); // 当用户new Vue时，就会调用init方法进行vue的初始方法\r\n}\r\n\r\ninitMixin(Vue);\r\nexport default Vue;\r\n"],"names":["Observer","value","walk","data","Object","keys","forEach","key","defineReactive","defineProperty","get","set","newValue","observe","initState","vm","opts","$options","props","methods","initData","computed","watch","proxy","source","_data","call","initMixin","Vue","prototype","_init","options"],"mappings":"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"}